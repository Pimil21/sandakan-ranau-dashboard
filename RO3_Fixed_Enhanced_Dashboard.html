<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>4D STC: Emotion Analytics - WORKING</title>
<script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
<style>
* {box-sizing:border-box;margin:0;padding:0}
body {font-family:'Segoe UI',sans-serif;overflow:hidden;background:#1a1a1a}
.dashboard {display:grid;grid-template-columns:320px 1fr 380px;grid-template-rows:60px 1fr;height:100vh;gap:0}
.header {grid-column:1/-1;background:linear-gradient(135deg,#2C3E50,#34495E);color:white;padding:15px 30px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 10px rgba(0,0,0,0.5)}
.header h1 {font-size:19px;font-weight:600;margin:0}
.header .sub {font-size:10px;opacity:0.8;margin-top:3px}
.hdr-btn {background:linear-gradient(135deg,#2ECC71,#27AE60);color:white;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;font-size:12px;font-weight:600}
.sidebar {background:rgba(255,255,255,0.98);overflow-y:auto;padding:20px}
#stc3d {width:100%;height:100%;background:#2b2b2b;position:relative}
.section {margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #ECF0F1}
.section h3 {font-size:13px;color:#7F8C8D;text-transform:uppercase;margin-bottom:12px;font-weight:600}
.section label {display:flex;align-items:center;cursor:pointer;font-size:13px;color:#34495E;padding:4px 0}
.section input[type="checkbox"] {margin-right:8px;cursor:pointer;width:16px;height:16px}
.stats {display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:10px 0}
.stat {background:linear-gradient(135deg,#3498DB,#2980B9);color:white;padding:12px;border-radius:6px;text-align:center}
.stat .val {font-size:24px;font-weight:bold;display:block;margin-bottom:4px}
.stat .lbl {font-size:11px;opacity:0.9}
.panel {background:linear-gradient(135deg,#E74C3C,#C0392B);color:white;padding:15px;border-radius:8px;margin-bottom:15px}
.panel h4 {font-size:14px;margin-bottom:10px;border-bottom:2px solid rgba(255,255,255,0.3);padding-bottom:8px}
.panel p {font-size:12px;line-height:1.6;margin:6px 0}
.panel strong {color:#FFD700}
button {background:linear-gradient(135deg,#3498DB,#2980B9);color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;font-size:12px;margin:4px 0;width:100%;font-weight:600}
.chart-box {background:white;border-radius:8px;padding:15px;margin-bottom:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}
.chart-box h4 {font-size:13px;color:#2C3E50;margin-bottom:10px;font-weight:600}
.chart-canvas {height:180px!important}
.legend-item {display:flex;align-items:center;margin:6px 0;font-size:11px;cursor:pointer;padding:3px;border-radius:4px;transition:background 0.2s}
.legend-item:hover {background:rgba(52,152,219,0.1)}
.legend-color {width:16px;height:10px;margin-right:6px;border-radius:2px}
.narrative-panel {position:absolute;top:20px;left:20px;width:400px;max-height:250px;background:rgba(44,62,80,0.95);border:2px solid #3498DB;border-radius:10px;padding:20px;color:white;box-shadow:0 4px 20px rgba(0,0,0,0.5);z-index:1000;display:none;overflow-y:auto}
.narrative-panel.visible {display:block}
.narrative-title {font-size:16px;font-weight:bold;color:#3498DB;margin-bottom:8px;border-bottom:2px solid #3498DB;padding-bottom:8px}
.narrative-meta {font-size:11px;color:#95A5A6;margin-bottom:12px;line-height:1.6}
.narrative-text {font-size:13px;line-height:1.8;font-style:italic;color:#ECF0F1;border-left:3px solid #3498DB;padding-left:12px;margin-top:10px}
.close-narrative {position:absolute;top:10px;right:15px;background:transparent;border:none;color:white;font-size:24px;cursor:pointer;padding:0;width:auto}
</style>
</head>
<body>
<div class="dashboard">
<div class="header">
<div><h1>üó∫Ô∏è 4D STC: Emotion Analytics - Sandakan-Ranau</h1>
<div class="sub">‚úÖ Synchronized | Click markers | Temporal evolution</div></div>
<div style="display:flex;gap:10px">
<button class="hdr-btn" onclick="tour()">üé• Tour</button>
<button class="hdr-btn" onclick="reset()">üîÑ Reset</button>
</div>
</div>
<div class="sidebar">
<div class="section">
<h3>üìä Dataset</h3>
<div class="stats"><div class="stat"><span class="val">60</span><span class="lbl">Total</span></div>
<div class="stat"><span class="val">25</span><span class="lbl">Emotions</span></div>
<div class="stat"><span class="val">25</span><span class="lbl">M1</span></div>
<div class="stat"><span class="val">30</span><span class="lbl">M2</span></div>
</div>
</div>
<div class="section">
<div class="panel">
<h4>üéØ Features</h4>
<p><strong>‚úÖ Synchronized:</strong> Charts update on click</p>
<p><strong>‚úÖ All Emotions:</strong> Plutchik + Extended</p>
</div>
</div>
<div class="section">
<h3>üé® Display</h3>
<label><input type="checkbox" id="curtains" checked onchange="draw()"> Vertical Curtains</label>
<label><input type="checkbox" id="topproj" checked onchange="draw()"> Top Projection</label>
<label><input type="checkbox" id="route" checked onchange="draw()"> Route Lines</label>
<label><input type="checkbox" id="markers" checked onchange="draw()"> Location Markers</label>
<label><input type="checkbox" id="emotions" checked onchange="draw()"> Emotion Markers</label>
</div>
<div class="section">
<h3>üõ§Ô∏è Marches</h3>
<label><input type="checkbox" id="m1" checked onchange="draw()">First March</label>
<label><input type="checkbox" id="m2" checked onchange="draw()">Second March</label>
<label><input type="checkbox" id="m3" checked onchange="draw()">Third March</label>
</div>
<div class="section">
<h3>üì∑ Camera</h3>
<button onclick="cam('default')">üîÑ Default</button>
<button onclick="cam('side')">‚ÜîÔ∏è Side</button>
<button onclick="cam('staircase')">ü™ú Staircase</button>
</div>
<div class="section">
<h3>üòä Filter Emotions</h3>
<div style="max-height:200px;overflow-y:auto">
<div class="legend-item" onclick="filterEmotion('fear')"><div class="legend-color" style="background:#9B59B6"></div>Fear (12)</div>
<div class="legend-item" onclick="filterEmotion('sadness')"><div class="legend-color" style="background:#5499C7"></div>Sadness (9)</div>
<div class="legend-item" onclick="filterEmotion('anger')"><div class="legend-color" style="background:#E74C3C"></div>Anger (0)</div>
<div class="legend-item" onclick="filterEmotion('disgust')"><div class="legend-color" style="background:#27AE60"></div>Disgust (1)</div>
<div class="legend-item" onclick="filterEmotion('joy')"><div class="legend-color" style="background:#F8D547"></div>Joy (0)</div>
<div class="legend-item" onclick="filterEmotion('surprise')"><div class="legend-color" style="background:#E91E63"></div>Surprise (0)</div>
<div class="legend-item" onclick="filterEmotion('trust')"><div class="legend-color" style="background:#16A085"></div>Trust (0)</div>
<div class="legend-item" onclick="filterEmotion('anticipation')"><div class="legend-color" style="background:#F39C12"></div>Anticipation (0)</div>
<div class="legend-item" onclick="filterEmotion('death')"><div class="legend-color" style="background:#34495E"></div>Death (0)</div>
<div class="legend-item" onclick="filterEmotion('suffering')"><div class="legend-color" style="background:#C0392B"></div>Suffering (0)</div>
</div>
<button onclick="filterEmotion('all')" style="margin-top:8px">üîÑ Show All</button>
</div>
</div>
<div id="stc3d">
<div id="narrativePanel" class="narrative-panel">
<button class="close-narrative" onclick="closeNarrative()">√ó</button>
<div class="narrative-title" id="narrativeTitle">Dominant Emotion</div>
<div class="narrative-meta" id="narrativeMeta">Click any emotion marker...</div>
<div class="narrative-text" id="narrativeText">"Narrative excerpt will appear here..."</div>
</div>
</div>
<div class="sidebar">
<div class="chart-box"><h4>üìâ Distance Decay</h4><canvas id="distanceDecayChart" class="chart-canvas"></canvas></div>
<div class="chart-box"><h4>üìä Emotion Intensity Distribution</h4><canvas id="intensityDistChart" class="chart-canvas"></canvas></div>
<div class="chart-box"><h4>üìà Temporal Evolution</h4><canvas id="temporalChart" class="chart-canvas"></canvas></div>
</div>
</div>
<script>
console.log('üöÄ Initializing 4D STC...');
const DATA = [{"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "First March", "march_number": 1, "segment": 1, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 2, "avg_sentiment_score": -0.0166666666666666, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 2, "unique_emotions": 1, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "First March", "march_number": 1, "segment": 1, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 248, "avg_sentiment_score": 0.0132152776392407, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0276769903905517, "total_emotions_detected": 372, "unique_emotions": 13, "fear_score": 54.0, "sadness_score": 70.0, "anger_score": 31.0, "disgust_score": 11.0, "joy_score": 9.0, "surprise_score": 18.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 43.0, "hunger_score": 15.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 7.0, "cruelty_score": 4.0, "suffering_score": 10.0, "despair_score": 0.0, "exhaustion_score": 4.0, "dominant_emotion": "sadness", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 2, "location_name": "Sandakan No. 1 Camp", "latitude": 5.884004, "longitude": 118.043773, "march_id": "First March", "march_number": 1, "segment": 2, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 5.100959125187651, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 3, "location_name": "Sandakan No. 2 Camp", "latitude": 5.88584, "longitude": 118.040132, "march_id": "First March", "march_number": 1, "segment": 3, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 5.550171369144002, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 4, "location_name": "East Cost Residency 1", "latitude": 5.891807, "longitude": 117.939952, "march_id": "First March", "march_number": 1, "segment": 4, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 16.5347145833192, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 5, "location_name": "East Cost Residency 2", "latitude": 5.885147, "longitude": 117.881334, "march_id": "First March", "march_number": 1, "segment": 5, "base_month": 240, "start_week": 30, "end_week": 28, "z_display": 210.0, "distance_from_sandakan": 22.914265810840607, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 6, "location_name": "East Cost Residency 4", "latitude": 5.817436, "longitude": 117.751413, "march_id": "First March", "march_number": 1, "segment": 8, "base_month": 210, "start_week": 28, "end_week": 28, "z_display": 180.0, "distance_from_sandakan": 37.695395263931395, "day_of_march": 30, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 7, "location_name": "Kolapis", "latitude": 5.81161, "longitude": 117.708217, "march_id": "First March", "march_number": 1, "segment": 9, "base_month": 210, "start_week": 28, "end_week": 26, "z_display": 180.0, "distance_from_sandakan": 42.53290416200161, "day_of_march": 30, "has_emotion_data": true, "mention_count": 4, "avg_sentiment_score": -0.1375, "sentiment_label": "negative", "avg_emotion_intensity": 0.0, "total_emotions_detected": 5, "unique_emotions": 3, "fear_score": 1.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Cutting the path at frequent intervals were a number of rivers, the largest of which were the Dusun at mile 33, Kolapis at the 44 mile, the Muanad (also known as the Munyed) at the 49 1 \u20442, the Pandan Pandan at about mile 58, the Mandorin at peg 60 and the Sapapiyau, a tributary of the Sapi, at abou..."}, {"location_id": 8, "location_name": "Mandorin", "latitude": 5.799095, "longitude": 117.561975, "march_id": "First March", "march_number": 1, "segment": 13, "base_month": 180, "start_week": 26, "end_week": 26, "z_display": 150.0, "distance_from_sandakan": 58.80078223847653, "day_of_march": 60, "has_emotion_data": true, "mention_count": 12, "avg_sentiment_score": -0.0544184981684981, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0136974136974136, "total_emotions_detected": 16, "unique_emotions": 7, "fear_score": 4.0, "sadness_score": 1.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 1.0, "hunger_score": 1.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 2.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Cutting the path at frequent intervals were a number of rivers, the largest of which were the Dusun at mile 33, Kolapis at the 44 mile, the Muanad (also known as the Munyed) at the 49 1 \u20442, the Pandan Pandan at about mile 58, the Mandorin at peg 60 and the Sapapiyau, a tributary of the Sapi, at abou..."}, {"location_id": 9, "location_name": "Pinintalangan", "latitude": 5.78162, "longitude": 117.456783, "march_id": "First March", "march_number": 1, "segment": 15, "base_month": 180, "start_week": 26, "end_week": 25, "z_display": 150.0, "distance_from_sandakan": 70.63182003045041, "day_of_march": 60, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 10, "location_name": "East Cost Residency 6", "latitude": 5.698765, "longitude": 117.392291, "march_id": "First March", "march_number": 1, "segment": 17, "base_month": 150, "start_week": 25, "end_week": 25, "z_display": 120.0, "distance_from_sandakan": 79.39941745635463, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 11, "location_name": "Malio", "latitude": 5.644052, "longitude": 117.249746, "march_id": "First March", "march_number": 1, "segment": 19, "base_month": 150, "start_week": 25, "end_week": 25, "z_display": 120.0, "distance_from_sandakan": 96.23559461995416, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 12, "location_name": "Telupid", "latitude": 5.62451, "longitude": 117.135425, "march_id": "First March", "march_number": 1, "segment": 22, "base_month": 120, "start_week": 25, "end_week": 25, "z_display": 90.0, "distance_from_sandakan": 109.06038169704196, "day_of_march": 120, "has_emotion_data": true, "mention_count": 12, "avg_sentiment_score": -0.0086111111111111, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 14, "unique_emotions": 3, "fear_score": 8.0, "sadness_score": 0.0, "anger_score": 2.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "From here the way turned south-west, along the Telupid River, before heading north west again...."}, {"location_id": 13, "location_name": "Papan", "latitude": 5.62409, "longitude": 117.096213, "march_id": "First March", "march_number": 1, "segment": 23, "base_month": 120, "start_week": 25, "end_week": 24, "z_display": 90.0, "distance_from_sandakan": 113.29264378138711, "day_of_march": 120, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 14, "location_name": "Miruru", "latitude": 5.627614, "longitude": 117.072034, "march_id": "First March", "march_number": 1, "segment": 24, "base_month": 120, "start_week": 24, "end_week": 24, "z_display": 90.0, "distance_from_sandakan": 115.80903810329887, "day_of_march": 120, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 15, "location_name": "Murikan", "latitude": 5.697652, "longitude": 116.857326, "march_id": "First March", "march_number": 1, "segment": 26, "base_month": 90, "start_week": 24, "end_week": 24, "z_display": 60.0, "distance_from_sandakan": 137.82109135121559, "day_of_march": 150, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 16, "location_name": "East Cost Residency 8", "latitude": 5.726295, "longitude": 116.850197, "march_id": "First March", "march_number": 1, "segment": 27, "base_month": 90, "start_week": 24, "end_week": 22, "z_display": 60.0, "distance_from_sandakan": 138.20520217053956, "day_of_march": 150, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 17, "location_name": "Paginatan", "latitude": 5.738946, "longitude": 116.842847, "march_id": "First March", "march_number": 1, "segment": 28, "base_month": 90, "start_week": 22, "end_week": 21, "z_display": 60.0, "distance_from_sandakan": 138.8630293278085, "day_of_march": 150, "has_emotion_data": true, "mention_count": 57, "avg_sentiment_score": 0.0219515645173539, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0313860112743449, "total_emotions_detected": 102, "unique_emotions": 14, "fear_score": 6.0, "sadness_score": 21.0, "anger_score": 3.0, "disgust_score": 6.0, "joy_score": 3.0, "surprise_score": 5.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 15.0, "hunger_score": 4.0, "trauma_score": 0.0, "survival_score": 1.0, "disease_score": 3.0, "cruelty_score": 2.0, "suffering_score": 1.0, "despair_score": 0.0, "exhaustion_score": 2.0, "dominant_emotion": "sadness", "narrative_excerpt": "Once past Tampias, where the Kegibangan met the Kuanan, the old native track, less than a metre wide in parts, snaked on, to the 128.5 mile at Paginatan before beginning the final ascent across the Crocker Ranges to the Ranau plain at peg 155, another 42 kilometres to the west...."}, {"location_id": 18, "location_name": "Paginatan-Ranau", "latitude": 5.76781, "longitude": 116.826151, "march_id": "First March", "march_number": 1, "segment": 29, "base_month": 90, "start_week": 21, "end_week": 21, "z_display": 60.0, "distance_from_sandakan": 140.41456370772391, "day_of_march": 150, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 19, "location_name": "Segindai", "latitude": 5.784455, "longitude": 116.82419, "march_id": "First March", "march_number": 1, "segment": 30, "base_month": 90, "start_week": 21, "end_week": 21, "z_display": 60.0, "distance_from_sandakan": 140.49644210025787, "day_of_march": 150, "has_emotion_data": true, "mention_count": 6, "avg_sentiment_score": 0.0302645502645502, "sentiment_label": "neutral", "avg_emotion_intensity": 0.010752688172043, "total_emotions_detected": 8, "unique_emotions": 5, "fear_score": 1.0, "sadness_score": 2.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 1.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "sadness", "narrative_excerpt": "Spurred on by the thought of pork stew that night, the prisoners headed towards Segindai, about 9 kilometres away at the 134 mile peg...."}, {"location_id": 20, "location_name": "Muruk", "latitude": 5.937485, "longitude": 116.782682, "march_id": "First March", "march_number": 1, "segment": 33, "base_month": 60, "start_week": 21, "end_week": 21, "z_display": 30.0, "distance_from_sandakan": 144.99305485213452, "day_of_march": 180, "has_emotion_data": true, "mention_count": 6, "avg_sentiment_score": 0.0204818594104308, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 6, "unique_emotions": 4, "fear_score": 2.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 1.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "They were a mile past Nelapak, on the ridge leading down to the Muruk, when he slumped against a large tree, refusing to go any further...."}, {"location_id": 21, "location_name": "British No. 2 Camp", "latitude": 5.952711, "longitude": 116.75512, "march_id": "First March", "march_number": 1, "segment": 34, "base_month": 60, "start_week": 21, "end_week": 20, "z_display": 30.0, "distance_from_sandakan": 148.14502165244582, "day_of_march": 180, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 22, "location_name": "Ranau No. 2 Jungle Camp", "latitude": 5.955479, "longitude": 116.753206, "march_id": "First March", "march_number": 1, "segment": 35, "base_month": 60, "start_week": 20, "end_week": 20, "z_display": 30.0, "distance_from_sandakan": 148.376677766296, "day_of_march": 180, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 23, "location_name": "Ranau No. 1 Camp", "latitude": 5.957422, "longitude": 116.753719, "march_id": "First March", "march_number": 1, "segment": 36, "base_month": 30, "start_week": 20, "end_week": 20, "z_display": 0.0, "distance_from_sandakan": 148.33401278095684, "day_of_march": 210, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 24, "location_name": "Ranau No. 1 Jungle Camp", "latitude": 5.956925, "longitude": 116.679781, "march_id": "First March", "march_number": 1, "segment": 37, "base_month": 30, "start_week": 20, "end_week": 17, "z_display": 0.0, "distance_from_sandakan": 156.52052282337678, "day_of_march": 210, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "Second March", "march_number": 2, "segment": 1, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 2, "avg_sentiment_score": -0.0166666666666666, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 2, "unique_emotions": 1, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "Second March", "march_number": 2, "segment": 1, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 248, "avg_sentiment_score": 0.0132152776392407, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0276769903905517, "total_emotions_detected": 372, "unique_emotions": 13, "fear_score": 54.0, "sadness_score": 70.0, "anger_score": 31.0, "disgust_score": 11.0, "joy_score": 9.0, "surprise_score": 18.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 43.0, "hunger_score": 15.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 7.0, "cruelty_score": 4.0, "suffering_score": 10.0, "despair_score": 0.0, "exhaustion_score": 4.0, "dominant_emotion": "sadness", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 2, "location_name": "Sandakan No. 1 Camp", "latitude": 5.884004, "longitude": 118.043773, "march_id": "Second March", "march_number": 2, "segment": 2, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 5.100959125187651, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 3, "location_name": "Sandakan No. 2 Camp", "latitude": 5.88584, "longitude": 118.040132, "march_id": "Second March", "march_number": 2, "segment": 3, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 5.550171369144002, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 4, "location_name": "East Cost Residency 1", "latitude": 5.891807, "longitude": 117.939952, "march_id": "Second March", "march_number": 2, "segment": 4, "base_month": 240, "start_week": 30, "end_week": 30, "z_display": 210.0, "distance_from_sandakan": 16.5347145833192, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 5, "location_name": "East Cost Residency 2", "latitude": 5.885147, "longitude": 117.881334, "march_id": "Second March", "march_number": 2, "segment": 5, "base_month": 240, "start_week": 30, "end_week": 28, "z_display": 210.0, "distance_from_sandakan": 22.914265810840607, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 6, "location_name": "East Cost Residency 3", "latitude": 5.860123, "longitude": 117.837378, "march_id": "Second March", "march_number": 2, "segment": 6, "base_month": 210, "start_week": 28, "end_week": 28, "z_display": 180.0, "distance_from_sandakan": 27.73726529316389, "day_of_march": 30, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 7, "location_name": "Dusun", "latitude": 5.837713, "longitude": 117.808174, "march_id": "Second March", "march_number": 2, "segment": 7, "base_month": 210, "start_week": 28, "end_week": 26, "z_display": 180.0, "distance_from_sandakan": 31.15327980842775, "day_of_march": 30, "has_emotion_data": true, "mention_count": 5, "avg_sentiment_score": -0.0482857142857142, "sentiment_label": "negative", "avg_emotion_intensity": 0.0, "total_emotions_detected": 7, "unique_emotions": 2, "fear_score": 3.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Cutting the path at frequent intervals were a number of rivers, the largest of which were the Dusun at mile 33, Kolapis at the 44 mile, the Muanad (also known as the Munyed) at the 49 1 \u20442, the Pandan Pandan at about mile 58, the Mandorin at peg 60 and the Sapapiyau, a tributary of the Sapi, at abou..."}, {"location_id": 8, "location_name": "East Cost Residency 4", "latitude": 5.817436, "longitude": 117.751413, "march_id": "Second March", "march_number": 2, "segment": 8, "base_month": 210, "start_week": 26, "end_week": 26, "z_display": 180.0, "distance_from_sandakan": 37.695395263931395, "day_of_march": 30, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 9, "location_name": "Kolapis", "latitude": 5.81161, "longitude": 117.708217, "march_id": "Second March", "march_number": 2, "segment": 9, "base_month": 210, "start_week": 26, "end_week": 25, "z_display": 180.0, "distance_from_sandakan": 42.53290416200161, "day_of_march": 30, "has_emotion_data": true, "mention_count": 4, "avg_sentiment_score": -0.1375, "sentiment_label": "negative", "avg_emotion_intensity": 0.0, "total_emotions_detected": 5, "unique_emotions": 3, "fear_score": 1.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Cutting the path at frequent intervals were a number of rivers, the largest of which were the Dusun at mile 33, Kolapis at the 44 mile, the Muanad (also known as the Munyed) at the 49 1 \u20442, the Pandan Pandan at about mile 58, the Mandorin at peg 60 and the Sapapiyau, a tributary of the Sapi, at abou..."}, {"location_id": 10, "location_name": "Beluran", "latitude": 5.818868, "longitude": 117.664927, "march_id": "Second March", "march_number": 2, "segment": 10, "base_month": 210, "start_week": 25, "end_week": 25, "z_display": 180.0, "distance_from_sandakan": 47.188569611998815, "day_of_march": 30, "has_emotion_data": true, "mention_count": 15, "avg_sentiment_score": 0.0192528459195125, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 14, "unique_emotions": 4, "fear_score": 1.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 3.0, "joy_score": 0.0, "surprise_score": 1.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "disgust", "narrative_excerpt": "Although various river systems linked by foot tracks formed a well-established route from Beluran to Tuaran, Yamamoto was ordered to take a more southerly route, developed less than six months previously...."}, {"location_id": 11, "location_name": "Muanad", "latitude": 5.821497, "longitude": 117.621488, "march_id": "Second March", "march_number": 2, "segment": 11, "base_month": 180, "start_week": 25, "end_week": 25, "z_display": 150.0, "distance_from_sandakan": 51.94983329606701, "day_of_march": 60, "has_emotion_data": true, "mention_count": 26, "avg_sentiment_score": -0.0229812779812779, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0106984908223298, "total_emotions_detected": 34, "unique_emotions": 10, "fear_score": 4.0, "sadness_score": 7.0, "anger_score": 2.0, "disgust_score": 1.0, "joy_score": 1.0, "surprise_score": 3.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 3.0, "hunger_score": 1.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 1.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "sadness", "narrative_excerpt": "The lower section, from the 42 mile to the head waters of the Sapi River, was surveyed and blazed by Sandshoe Willie (in his capacity as Beluran\u2019s Deputy District Officer) and his undercover colleague Orang Tuan Kulang of Muanad, head of the local Dusan tribespeople...."}, {"location_id": 12, "location_name": "Mandorin", "latitude": 5.799095, "longitude": 117.561975, "march_id": "Second March", "march_number": 2, "segment": 13, "base_month": 180, "start_week": 25, "end_week": 25, "z_display": 150.0, "distance_from_sandakan": 58.80078223847653, "day_of_march": 60, "has_emotion_data": true, "mention_count": 12, "avg_sentiment_score": -0.0544184981684981, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0136974136974136, "total_emotions_detected": 16, "unique_emotions": 7, "fear_score": 4.0, "sadness_score": 1.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 1.0, "hunger_score": 1.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 2.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Cutting the path at frequent intervals were a number of rivers, the largest of which were the Dusun at mile 33, Kolapis at the 44 mile, the Muanad (also known as the Munyed) at the 49 1 \u20442, the Pandan Pandan at about mile 58, the Mandorin at peg 60 and the Sapapiyau, a tributary of the Sapi, at abou..."}, {"location_id": 13, "location_name": "Tuanintin", "latitude": 5.791544, "longitude": 117.514328, "march_id": "Second March", "march_number": 2, "segment": 14, "base_month": 180, "start_week": 25, "end_week": 24, "z_display": 150.0, "distance_from_sandakan": 64.15402711065487, "day_of_march": 60, "has_emotion_data": true, "mention_count": 2, "avg_sentiment_score": 0.35, "sentiment_label": "positive", "avg_emotion_intensity": 0.1176470588235294, "total_emotions_detected": 4, "unique_emotions": 2, "fear_score": 0.0, "sadness_score": 2.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 2.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "sadness", "narrative_excerpt": "He died of acute enteritis at the Tuanintin River, near the 70 mile peg on 16 June...."}, {"location_id": 14, "location_name": "East Cost Residency 5", "latitude": 5.762188, "longitude": 117.437494, "march_id": "Second March", "march_number": 2, "segment": 16, "base_month": 150, "start_week": 24, "end_week": 24, "z_display": 120.0, "distance_from_sandakan": 73.07127904143286, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 15, "location_name": "East Cost Residency 6", "latitude": 5.698765, "longitude": 117.392291, "march_id": "Second March", "march_number": 2, "segment": 17, "base_month": 150, "start_week": 24, "end_week": 24, "z_display": 120.0, "distance_from_sandakan": 79.39941745635463, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 16, "location_name": "East Cost Residency 7", "latitude": 5.655044, "longitude": 117.28722, "march_id": "Second March", "march_number": 2, "segment": 18, "base_month": 150, "start_week": 24, "end_week": 22, "z_display": 120.0, "distance_from_sandakan": 91.90194826448561, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 17, "location_name": "Malio", "latitude": 5.644052, "longitude": 117.249746, "march_id": "Second March", "march_number": 2, "segment": 19, "base_month": 150, "start_week": 22, "end_week": 21, "z_display": 120.0, "distance_from_sandakan": 96.23559461995416, "day_of_march": 90, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 18, "location_name": "Kemansi", "latitude": 5.629997, "longitude": 117.173106, "march_id": "Second March", "march_number": 2, "segment": 21, "base_month": 120, "start_week": 21, "end_week": 21, "z_display": 90.0, "distance_from_sandakan": 104.85863370030916, "day_of_march": 120, "has_emotion_data": true, "mention_count": 10, "avg_sentiment_score": 0.0519047619047619, "sentiment_label": "positive", "avg_emotion_intensity": 0.03, "total_emotions_detected": 16, "unique_emotions": 5, "fear_score": 4.0, "sadness_score": 0.0, "anger_score": 2.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 2.0, "hunger_score": 2.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "Consequently, before he returned to Jesselton, he agreed with Hoshijima\u2019s proposal that they should be shifted, not to Ranau, but to Kemansi, a large Japanese-owned estate on the lower reaches of the Labuk River, easily accessible by boat...."}, {"location_id": 19, "location_name": "Telupid", "latitude": 5.62451, "longitude": 117.135425, "march_id": "Second March", "march_number": 2, "segment": 22, "base_month": 120, "start_week": 21, "end_week": 21, "z_display": 90.0, "distance_from_sandakan": 109.06038169704196, "day_of_march": 120, "has_emotion_data": true, "mention_count": 12, "avg_sentiment_score": -0.0086111111111111, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 14, "unique_emotions": 3, "fear_score": 8.0, "sadness_score": 0.0, "anger_score": 2.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "From here the way turned south-west, along the Telupid River, before heading north west again...."}, {"location_id": 20, "location_name": "Papan", "latitude": 5.62409, "longitude": 117.096213, "march_id": "Second March", "march_number": 2, "segment": 23, "base_month": 120, "start_week": 21, "end_week": 21, "z_display": 90.0, "distance_from_sandakan": 113.29264378138711, "day_of_march": 120, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 21, "location_name": "Miruru", "latitude": 5.627614, "longitude": 117.072034, "march_id": "Second March", "march_number": 2, "segment": 24, "base_month": 120, "start_week": 21, "end_week": 20, "z_display": 90.0, "distance_from_sandakan": 115.80903810329887, "day_of_march": 120, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 22, "location_name": "Tampias", "latitude": 5.659154, "longitude": 116.940269, "march_id": "Second March", "march_number": 2, "segment": 25, "base_month": 120, "start_week": 20, "end_week": 20, "z_display": 90.0, "distance_from_sandakan": 129.4079992077338, "day_of_march": 120, "has_emotion_data": true, "mention_count": 22, "avg_sentiment_score": -0.0215361952861952, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0131058872477636, "total_emotions_detected": 27, "unique_emotions": 7, "fear_score": 5.0, "sadness_score": 3.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 3.0, "hunger_score": 1.0, "trauma_score": 0.0, "survival_score": 1.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "The middle section, from Sapi to Tampias, a distance of about 100 or so kilometres, had been the responsibility of Kanak, headman of Tendu Batu and chief of the Orang Sungei (River People), while the last part, following the line of an existing native foot pad, had been placed in the control of Acko..."}, {"location_id": 23, "location_name": "Murikan", "latitude": 5.697652, "longitude": 116.857326, "march_id": "Second March", "march_number": 2, "segment": 26, "base_month": 90, "start_week": 20, "end_week": 20, "z_display": 60.0, "distance_from_sandakan": 137.82109135121559, "day_of_march": 150, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 24, "location_name": "East Cost Residency 8", "latitude": 5.726295, "longitude": 116.850197, "march_id": "Second March", "march_number": 2, "segment": 27, "base_month": 90, "start_week": 20, "end_week": 17, "z_display": 60.0, "distance_from_sandakan": 138.20520217053956, "day_of_march": 150, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 25, "location_name": "Paginatan", "latitude": 5.738946, "longitude": 116.842847, "march_id": "Second March", "march_number": 2, "segment": 28, "base_month": 90, "start_week": 17, "end_week": 17, "z_display": 60.0, "distance_from_sandakan": 138.8630293278085, "day_of_march": 150, "has_emotion_data": true, "mention_count": 57, "avg_sentiment_score": 0.0219515645173539, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0313860112743449, "total_emotions_detected": 102, "unique_emotions": 14, "fear_score": 6.0, "sadness_score": 21.0, "anger_score": 3.0, "disgust_score": 6.0, "joy_score": 3.0, "surprise_score": 5.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 15.0, "hunger_score": 4.0, "trauma_score": 0.0, "survival_score": 1.0, "disease_score": 3.0, "cruelty_score": 2.0, "suffering_score": 1.0, "despair_score": 0.0, "exhaustion_score": 2.0, "dominant_emotion": "sadness", "narrative_excerpt": "Once past Tampias, where the Kegibangan met the Kuanan, the old native track, less than a metre wide in parts, snaked on, to the 128.5 mile at Paginatan before beginning the final ascent across the Crocker Ranges to the Ranau plain at peg 155, another 42 kilometres to the west...."}, {"location_id": 26, "location_name": "Segindai", "latitude": 5.784455, "longitude": 116.82419, "march_id": "Second March", "march_number": 2, "segment": 30, "base_month": 90, "start_week": 17, "end_week": 16, "z_display": 60.0, "distance_from_sandakan": 140.49644210025787, "day_of_march": 150, "has_emotion_data": true, "mention_count": 6, "avg_sentiment_score": 0.0302645502645502, "sentiment_label": "neutral", "avg_emotion_intensity": 0.010752688172043, "total_emotions_detected": 8, "unique_emotions": 5, "fear_score": 1.0, "sadness_score": 2.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 1.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "sadness", "narrative_excerpt": "Spurred on by the thought of pork stew that night, the prisoners headed towards Segindai, about 9 kilometres away at the 134 mile peg...."}, {"location_id": 27, "location_name": "Nebutan", "latitude": 5.850325, "longitude": 116.815546, "march_id": "Second March", "march_number": 2, "segment": 31, "base_month": 60, "start_week": 16, "end_week": 15, "z_display": 30.0, "distance_from_sandakan": 141.15894334029738, "day_of_march": 180, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 28, "location_name": "Muruk", "latitude": 5.937485, "longitude": 116.782682, "march_id": "Second March", "march_number": 2, "segment": 33, "base_month": 60, "start_week": 15, "end_week": 14, "z_display": 30.0, "distance_from_sandakan": 144.99305485213452, "day_of_march": 180, "has_emotion_data": true, "mention_count": 6, "avg_sentiment_score": 0.0204818594104308, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 6, "unique_emotions": 4, "fear_score": 2.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 1.0, "joy_score": 0.0, "surprise_score": 1.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "They were a mile past Nelapak, on the ridge leading down to the Muruk, when he slumped against a large tree, refusing to go any further...."}, {"location_id": 29, "location_name": "Ranau", "latitude": 5.959678, "longitude": 116.676557, "march_id": "Second March", "march_number": 2, "segment": 38, "base_month": 30, "start_week": 14, "end_week": 13, "z_display": 0.0, "distance_from_sandakan": 156.89705350148435, "day_of_march": 210, "has_emotion_data": true, "mention_count": 228, "avg_sentiment_score": 0.0065083953570795, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0111565599752756, "total_emotions_detected": 295, "unique_emotions": 14, "fear_score": 36.0, "sadness_score": 32.0, "anger_score": 16.0, "disgust_score": 16.0, "joy_score": 4.0, "surprise_score": 18.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 18.0, "hunger_score": 4.0, "trauma_score": 0.0, "survival_score": 2.0, "disease_score": 4.0, "cruelty_score": 2.0, "suffering_score": 4.0, "despair_score": 2.0, "exhaustion_score": 0.0, "dominant_emotion": "fear", "narrative_excerpt": "The new path, or rentis as it was also termed, had been cut or widened in three stages and linked the 42 mile peg on the existing Sandakan-Beluran track with Ranau, another 180 kilometres further west...."}, {"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "Third March", "march_number": 3, "segment": 1, "base_month": 240, "start_week": 17, "end_week": 16, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 2, "avg_sentiment_score": -0.0166666666666666, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 2, "unique_emotions": 1, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 1, "location_name": "Sandakan", "latitude": 5.86873, "longitude": 118.087115, "march_id": "Third March", "march_number": 3, "segment": 1, "base_month": 240, "start_week": 17, "end_week": 16, "z_display": 210.0, "distance_from_sandakan": 0.0, "day_of_march": 0, "has_emotion_data": true, "mention_count": 248, "avg_sentiment_score": 0.0132152776392407, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0276769903905517, "total_emotions_detected": 372, "unique_emotions": 13, "fear_score": 54.0, "sadness_score": 70.0, "anger_score": 31.0, "disgust_score": 11.0, "joy_score": 9.0, "surprise_score": 18.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 43.0, "hunger_score": 15.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 7.0, "cruelty_score": 4.0, "suffering_score": 10.0, "despair_score": 0.0, "exhaustion_score": 4.0, "dominant_emotion": "sadness", "narrative_excerpt": "On 13 # TJanuary Captain Yamamoto Shoichi, commanding officer of the 25th Mixed Regiment currently based at Sandakan, had been instructed to move 360 infantry troops and a company of machine gunners to Tuaran, more than 400 kilometres to the west...."}, {"location_id": 2, "location_name": "Sandakan No. 1 Camp", "latitude": 5.884004, "longitude": 118.043773, "march_id": "Third March", "march_number": 3, "segment": 2, "base_month": 240, "start_week": 16, "end_week": 15, "z_display": 210.0, "distance_from_sandakan": 5.100959125187651, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 3, "location_name": "Sandakan No. 2 Camp", "latitude": 5.88584, "longitude": 118.040132, "march_id": "Third March", "march_number": 3, "segment": 3, "base_month": 240, "start_week": 15, "end_week": 14, "z_display": 210.0, "distance_from_sandakan": 5.550171369144002, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}, {"location_id": 4, "location_name": "East Cost Residency 1", "latitude": 5.891807, "longitude": 117.939952, "march_id": "Third March", "march_number": 3, "segment": 4, "base_month": 240, "start_week": 14, "end_week": 13, "z_display": 210.0, "distance_from_sandakan": 16.5347145833192, "day_of_march": 0, "has_emotion_data": false, "mention_count": 0, "avg_sentiment_score": 0.0, "sentiment_label": "neutral", "avg_emotion_intensity": 0.0, "total_emotions_detected": 0, "unique_emotions": 0, "fear_score": 0.0, "sadness_score": 0.0, "anger_score": 0.0, "disgust_score": 0.0, "joy_score": 0.0, "surprise_score": 0.0, "trust_score": 0.0, "anticipation_score": 0.0, "death_score": 0.0, "hunger_score": 0.0, "trauma_score": 0.0, "survival_score": 0.0, "disease_score": 0.0, "cruelty_score": 0.0, "suffering_score": 0.0, "despair_score": 0.0, "exhaustion_score": 0.0, "dominant_emotion": "neutral", "narrative_excerpt": ""}];
const MAX_Z = 210.0;
const TEMPORAL_DATA = {"days": [0, 30, 60, 120, 150, 180, 210], "counts": [6, 4, 4, 4, 4, 2, 1], "locations": [["Sandakan", "Sandakan", "Sandakan", "Sandakan", "Sandakan", "Sandakan"], ["Kolapis", "Dusun", "Kolapis", "Beluran"], ["Mandorin", "Muanad", "Mandorin", "Tuanintin"], ["Telupid", "Kemansi", "Telupid", "Tampias"], ["Paginatan", "Segindai", "Paginatan", "Segindai"], ["Muruk", "Muruk"], ["Ranau"]]};
console.log('‚úì Data loaded:', DATA.length, 'records');

let filteredData = [...DATA];
let currentFilter = 'all';
let selectedLocation = null;
const emotionColors = {
    'fear': '#9B59B6', 'sadness': '#5499C7', 'anger': '#E74C3C', 'disgust': '#27AE60',
    'joy': '#F8D547', 'surprise': '#E91E63', 'neutral': '#95A5A6', 'trust': '#16A085',
    'anticipation': '#F39C12', 'death': '#34495E', 'hunger': '#D35400', 'trauma': '#8E44AD',
    'survival': '#27AE60', 'disease': '#7F8C8D', 'cruelty': '#922B21', 'suffering': '#C0392B',
    'despair': '#5D6D7E', 'exhaustion': '#AAB7B8'
};
let chartInstances = {};

function showNarrative(loc) {
    selectedLocation = loc;
    const panel = document.getElementById('narrativePanel');
    const title = document.getElementById('narrativeTitle');
    const meta = document.getElementById('narrativeMeta');
    const text = document.getElementById('narrativeText');

    title.textContent = 'Dominant Emotion: ' + loc.dominant_emotion.charAt(0).toUpperCase() + loc.dominant_emotion.slice(1);

    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'];
    const monthIdx = Math.floor((240 - loc.base_month) / 30);
    const dateStr = monthNames[monthIdx] + ' 1945';

    meta.innerHTML = '<strong>Location:</strong> ' + loc.location_name + '<br>' +
                     '<strong>Date:</strong> ' + dateStr + ' (Day ' + loc.day_of_march + ')<br>' +
                     '<strong>March:</strong> #' + loc.march_number + ' | ' +
                     '<strong>Intensity:</strong> ' + loc.avg_emotion_intensity.toFixed(4) + ' | ' +
                     '<strong>Sentiment:</strong> ' + loc.avg_sentiment_score.toFixed(3) + '<br>' +
                     '<strong>Distance:</strong> ' + loc.distance_from_sandakan.toFixed(1) + ' km from Sandakan';

    if (loc.narrative_excerpt && loc.narrative_excerpt.length > 10) {
        text.textContent = '"' + loc.narrative_excerpt + '"';
    } else {
        text.textContent = '"No narrative excerpt available. Mentioned ' + loc.mention_count + ' times in records."';
    }

    panel.classList.add('visible');
    highlightInTemporalChart(loc.day_of_march);
}

function closeNarrative() {
    document.getElementById('narrativePanel').classList.remove('visible');
    selectedLocation = null;
    updateCharts();
}

function highlightInTemporalChart(selectedDay) {
    const ctx = document.getElementById('temporalChart').getContext('2d');
    if (chartInstances.temporal) {
        chartInstances.temporal.destroy();
    }

    const dayIndex = TEMPORAL_DATA.days.indexOf(selectedDay);
    const backgroundColors = TEMPORAL_DATA.days.map((d, i) => 
        i === dayIndex ? 'rgba(231,76,60,0.7)' : 'rgba(52,152,219,0.3)'
    );
    const borderColors = TEMPORAL_DATA.days.map((d, i) => 
        i === dayIndex ? '#E74C3C' : '#3498DB'
    );

    chartInstances.temporal = new Chart(ctx, {
        type: 'line',
        data: {
            labels: TEMPORAL_DATA.days.map(d => 'Day ' + d),
            datasets: [{
                label: 'Emotion Mentions',
                data: TEMPORAL_DATA.counts,
                borderColor: '#3498DB',
                backgroundColor: backgroundColors,
                fill: true,
                tension: 0.4,
                pointRadius: TEMPORAL_DATA.days.map((d, i) => i === dayIndex ? 8 : 4),
                pointHoverRadius: 10,
                pointBackgroundColor: borderColors,
                pointBorderColor: borderColors
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        afterLabel: function(context) {
                            const idx = context.dataIndex;
                            const locs = TEMPORAL_DATA.locations[idx];
                            return locs ? 'Locations: ' + locs.slice(0, 3).join(', ') + (locs.length > 3 ? '...' : '') : '';
                        }
                    }
                }
            },
            scales: {
                x: { title: { display: true, text: 'Days of March', font: { size: 10 } } },
                y: { beginAtZero: true, title: { display: true, text: 'Count', font: { size: 10 } } }
            },
            onClick: (event, elements) => {
                if (elements.length > 0) {
                    const idx = elements[0].index;
                    const day = TEMPORAL_DATA.days[idx];
                    const locations = TEMPORAL_DATA.locations[idx];
                    if (locations && locations.length > 0) {
                        const loc = DATA.find(d => d.day_of_march === day && d.has_emotion_data);
                        if (loc) showNarrative(loc);
                    }
                }
            }
        }
    });
}

function filterEmotion(emo) {
    currentFilter = emo;
    if (emo === 'all') {
        filteredData = [...DATA];
    } else {
        filteredData = DATA.filter(d => d.dominant_emotion === emo && d.has_emotion_data);
    }
    draw();
    updateCharts();
}

function draw() {
    console.log('üé® Drawing 3D STC...');
    const traces = [];
    const colors = { 1: 'rgba(255,215,0,0.9)', 2: 'rgba(255,105,180,0.9)', 3: 'rgba(46,204,113,0.9)' };

    const showCurtains = document.getElementById('curtains').checked;
    const showTop = document.getElementById('topproj').checked;
    const showRoute = document.getElementById('route').checked;
    const showMarkers = document.getElementById('markers').checked;
    const showEmotions = document.getElementById('emotions').checked;

    [1, 2, 3].forEach(m => {
        if (!document.getElementById('m' + m).checked) return;
        const mData = filteredData.filter(d => d.march_number === m);
        if (mData.length === 0) return;

        if (showCurtains) {
            mData.forEach((pt, i) => {
                traces.push({
                    type: 'scatter3d',
                    mode: 'lines',
                    name: i === 0 ? 'M' + m + ' Curtains' : '',
                    showlegend: i === 0,
                    x: [pt.longitude, pt.longitude],
                    y: [pt.latitude, pt.latitude],
                    z: [0, pt.z_display],
                    line: { color: colors[m], width: 3 },
                    hoverinfo: 'skip'
                });
            });
        }

        if (showTop) {
            traces.push({
                type: 'scatter3d',
                mode: 'lines',
                name: 'M' + m + ' Top',
                x: mData.map(d => d.longitude),
                y: mData.map(d => d.latitude),
                z: mData.map(d => MAX_Z),
                line: { color: colors[m], width: 4, dash: 'dot' },
                opacity: 0.4,
                showlegend: false
            });
        }

        if (showRoute) {
            traces.push({
                type: 'scatter3d',
                mode: 'lines',
                name: 'M' + m + ' Route',
                x: mData.map(d => d.longitude),
                y: mData.map(d => d.latitude),
                z: mData.map(d => d.z_display),
                line: { color: colors[m], width: 8 },
                hoverinfo: 'skip'
            });
        }

        if (showMarkers) {
            traces.push({
                type: 'scatter3d',
                mode: 'markers',
                name: 'M' + m + ' Locs',
                x: mData.map(d => d.longitude),
                y: mData.map(d => d.latitude),
                z: mData.map(d => d.z_display),
                marker: {
                    size: 6,
                    color: colors[m],
                    symbol: 'diamond',
                    line: { color: 'white', width: 2 }
                },
                hovertemplate: '<b>%{text}</b><br>M' + m + '<br>Week %{customdata[0]}-%{customdata[1]}<extra></extra>',
                text: mData.map(d => d.location_name),
                customdata: mData.map(d => [d.start_week, d.end_week]),
                showlegend: false
            });
        }
    });

    if (showEmotions) {
        const emotionsData = filteredData.filter(d => d.has_emotion_data);
        const allEmoTypes = ['fear', 'sadness', 'anger', 'disgust', 'joy', 'surprise', 'trust', 'anticipation', 'death', 'suffering'];

        allEmoTypes.forEach(emo => {
            const emoData = emotionsData.filter(d => d.dominant_emotion === emo);
            if (emoData.length > 0) {
                traces.push({
                    type: 'scatter3d',
                    mode: 'markers',
                    name: emo.charAt(0).toUpperCase() + emo.slice(1),
                    x: emoData.map(d => d.longitude),
                    y: emoData.map(d => d.latitude),
                    z: emoData.map(d => d.z_display),
                    marker: {
                        size: emoData.map(d => Math.max(15, 15 + d.avg_emotion_intensity * 20 + Math.abs(d.avg_sentiment_score) * 10)),
                        color: emotionColors[emo],
                        opacity: 0.85,
                        symbol: 'circle',
                        line: { color: 'white', width: 3 }
                    },
                    hovertemplate: '<b>%{text}</b><br>' + emo.toUpperCase() + '<br>Sent: %{customdata[0]:.3f} | Int: %{customdata[1]:.3f}<br>Dist: %{customdata[3]:.1f}km<br><i>Click for narrative</i><extra></extra>',
                    text: emoData.map(d => d.location_name),
                    customdata: emoData.map(d => [d.avg_sentiment_score, d.avg_emotion_intensity, d.mention_count, d.distance_from_sandakan])
                });
            }
        });
    }

    const layout = {
        title: {
            text: '4D STC: Emotion Analytics<br><sub>‚úÖ Synchronized | Click markers or timeline</sub>',
            font: { color: 'white', size: 16 },
            x: 0.5
        },
        scene: {
            xaxis: { title: 'Longitude (¬∞E)', gridcolor: '#444', backgroundcolor: '#2b2b2b', color: 'white' },
            yaxis: { title: 'Latitude (¬∞N)', gridcolor: '#444', backgroundcolor: '#2b2b2b', color: 'white' },
            zaxis: {
                title: 'Temporal Order (Jan-Aug 1945)',
                gridcolor: '#444',
                backgroundcolor: '#2b2b2b',
                color: 'white',
                tickvals: [0, 30, 60, 90, 120, 150, 180, 210],
                ticktext: ['Aug', 'Jul', 'Jun', 'May', 'Apr', 'Mar', 'Feb', 'Jan']
            },
            bgcolor: '#2b2b2b',
            camera: { eye: { x: 1.8, y: -1.8, z: 1.5 } }
        },
        paper_bgcolor: '#2b2b2b',
        plot_bgcolor: '#2b2b2b',
        font: { color: 'white' },
        showlegend: true,
        legend: {
            bgcolor: 'rgba(0,0,0,0.8)',
            bordercolor: 'white',
            borderwidth: 1,
            font: { color: 'white', size: 9 }
        },
        margin: { l: 0, r: 0, t: 60, b: 0 }
    };

    Plotly.newPlot('stc3d', traces, layout, { responsive: true, displayModeBar: true, displaylogo: false });

    document.getElementById('stc3d').on('plotly_click', function(data) {
        const point = data.points[0];
        const locationName = point.text;
        const location = DATA.find(d => d.location_name === locationName && d.has_emotion_data);
        if (location) showNarrative(location);
    });
}

function updateCharts() {
    const emotionsData = filteredData.filter(d => d.has_emotion_data);
    Object.values(chartInstances).forEach(chart => chart.destroy());
    chartInstances = {};

    // Distance Decay Chart
    const ctx0 = document.getElementById('distanceDecayChart').getContext('2d');
    const emotions = ['fear', 'sadness', 'anger', 'disgust', 'joy', 'surprise'];
    const distDatasets = emotions.map(emo => {
        const pts = emotionsData.filter(d => d.dominant_emotion === emo);
        return {
            label: emo.charAt(0).toUpperCase() + emo.slice(1),
            data: pts.map(d => ({ x: d.distance_from_sandakan, y: d.avg_emotion_intensity })),
            backgroundColor: emotionColors[emo] + '99',
            pointRadius: 5
        };
    });

    chartInstances.distance = new Chart(ctx0, {
        type: 'scatter',
        data: { datasets: distDatasets },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom', labels: { boxWidth: 8, font: { size: 9 } } }
            },
            scales: {
                x: { title: { display: true, text: 'Distance (km)', font: { size: 10 } }, beginAtZero: true },
                y: { title: { display: true, text: 'Intensity', font: { size: 10 } }, min: 0, max: 1 }
            }
        }
    });

    // Intensity Distribution Chart
    const ctx1 = document.getElementById('intensityDistChart').getContext('2d');
    const allEmoTypes = ['fear', 'sadness', 'anger', 'disgust', 'joy', 'surprise', 'trust', 'anticipation'];
    const intensitySums = allEmoTypes.map(emo => {
        return emotionsData.filter(d => d.dominant_emotion === emo).reduce((sum, d) => sum + d.avg_emotion_intensity, 0);
    });

    chartInstances.intensity = new Chart(ctx1, {
        type: 'bar',
        data: {
            labels: allEmoTypes.map(e => e.charAt(0).toUpperCase() + e.slice(1)),
            datasets: [{
                data: intensitySums,
                backgroundColor: allEmoTypes.map(e => emotionColors[e] + 'CC')
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: {
                y: { beginAtZero: true, title: { display: true, text: 'Total Intensity', font: { size: 9 } } }
            }
        }
    });

    highlightInTemporalChart(selectedLocation ? selectedLocation.day_of_march : -1);
}

function cam(preset) {
    const cams = {
        'default': { eye: { x: 1.8, y: -1.8, z: 1.5 } },
        'side': { eye: { x: 2.5, y: 0, z: 0.8 } },
        'staircase': { eye: { x: 2.2, y: -2.2, z: 1.8 } }
    };
    Plotly.relayout('stc3d', { 'scene.camera': cams[preset] });
}

function reset() {
    cam('default');
    closeNarrative();
}

function tour() {
    const waypoints = [
        { eye: { x: 1.8, y: -1.8, z: 1.5 } },
        { eye: { x: 0, y: -2.5, z: 1.5 } },
        { eye: { x: -2, y: -1.5, z: 1.2 } },
        { eye: { x: 2.5, y: 0, z: 0.8 } },
        { eye: { x: 0, y: 0, z: 2.8 } },
        { eye: { x: 1.8, y: -1.8, z: 1.5 } }
    ];
    let i = 0;
    function next() {
        if (i >= waypoints.length) return;
        Plotly.animate('stc3d', { layout: { 'scene.camera': waypoints[i] } }, { transition: { duration: 2000 }, frame: { duration: 2000 } });
        i++;
        if (i < waypoints.length) setTimeout(next, 2200);
    }
    next();
}

window.addEventListener('load', () => {
    console.log('‚úÖ Page loaded, rendering visualization...');
    draw();
    updateCharts();
});

console.log('‚úì JavaScript loaded successfully');
</script>
</body>
</html>
